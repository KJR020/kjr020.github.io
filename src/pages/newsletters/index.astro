---
import { getCollection } from "astro:content";
import NewsletterCard from "@/components/NewsletterCard.astro";
import PageHero from "@/components/PageHero.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";

const newsletters = await getCollection("newsletters");
const sortedNewsletters = newsletters.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
);
---

<BaseLayout
  title="Tech Trends - KJR020's Blog"
  description="AI・テック系の最新トレンドニュースレター"
>
  <PageHero
    title="Tech Trends Newsletter"
    description="AIが選んだ最新テック・AIトレンドまとめです。"
  />
  <div class="container mx-auto px-4 pb-phi-2xl">
    {
      sortedNewsletters.length === 0 ? (
        <p class="text-muted-foreground">まだニュースレターはありません</p>
      ) : (
        <div class="grid gap-phi-xs">
          {sortedNewsletters.map((newsletter) => (
            <NewsletterCard newsletter={newsletter} />
          ))}
        </div>
      )
    }
  </div>
</BaseLayout>
