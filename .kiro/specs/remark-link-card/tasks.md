# Implementation Plan: remark-link-card

## Tasks

- [ ] 1. プラグインのインストールと設定
- [ ] 1.1 remark-link-cardパッケージをインストールする
  - npm/bunでremark-link-cardをプロジェクトに追加
  - package.jsonの依存関係にパッケージが追加されていることを確認
  - _Requirements: 1.1_

- [ ] 1.2 Astro設定ファイルにremarkプラグインを追加する
  - remark-link-cardをimportしてremarkPlugins配列に追加
  - cache: trueとshortenUrl: trueのオプションを設定
  - 既存のrehypePlugins（mermaid）との共存を確認
  - TypeScript警告が発生する場合は適切に対処
  - _Requirements: 1.1, 1.3, 1.4_

- [ ] 1.3 キャッシュディレクトリをgitignoreに追加する
  - .gitignoreにremark-link-cardのキャッシュディレクトリを追加
  - キャッシュがバージョン管理から除外されることを確認
  - _Requirements: 5.2_

- [ ] 1.4 ビルドを実行して動作確認する
  - astro buildコマンドを実行
  - エラーなくビルドが完了することを確認
  - キャッシュディレクトリが生成されることを確認
  - _Requirements: 1.2, 5.1, 5.3_

- [ ] 2. リンクカードのベーススタイルを実装する
- [ ] 2.1 (P) カードコンテナの基本スタイルを定義する
  - globals.cssにリンクカード用のセクションを追加
  - .rlc-containerにカード全体のレイアウト（display: flex）を設定
  - 既存CSS変数（--card, --border, --radius）を使用して背景・境界線・角丸を設定
  - .prose aとの競合を避けるためのリセットスタイルを追加
  - 適切なマージン・パディングを設定
  - _Requirements: 3.1, 3.2_

- [ ] 2.2 (P) テキスト情報エリアのスタイルを定義する
  - .rlc-infoにフレックスレイアウトを設定
  - .rlc-titleにタイトルスタイル（--card-foreground、フォントサイズ、太字）を設定
  - .rlc-descriptionに説明文スタイル（--muted-foreground、フォントサイズ、行制限）を設定
  - .rlc-url-containerとファビコン・URL表示のスタイルを設定
  - _Requirements: 3.1, 3.2_

- [ ] 2.3 (P) OG画像エリアのスタイルを定義する
  - .rlc-image-containerに画像コンテナのスタイルを設定
  - .rlc-imageにオブジェクトフィットとサイズ制約を設定
  - 画像がない場合のフォールバック表示を実装
  - _Requirements: 3.2_

- [ ] 3. インタラクティブ機能とレスポンシブ対応を実装する
- [ ] 3.1 ホバーエフェクトを実装する
  - transitionプロパティでスムーズなアニメーションを設定
  - ホバー時のbox-shadow強調を設定
  - ホバー時のtransform: translateY(-2px)による浮き上がり効果を設定
  - _Requirements: 3.3_

- [ ] 3.2 レスポンシブレイアウトを実装する
  - デスクトップ（768px以上）では横並びレイアウトを維持
  - モバイル（768px未満）では縦並びレイアウトに切り替え
  - 画像サイズをデバイスに応じて調整
  - _Requirements: 3.4_

- [ ] 4. ダークモード対応を実装する
- [ ] 4.1 ダークモード用のスタイルを定義する
  - .darkセレクタ内でリンクカードのスタイルをオーバーライド
  - ダークモード用CSS変数を使用して背景・テキスト色を調整
  - コントラスト比が適切で読みやすい状態を確保
  - テーマ切替時に即座に反映されることを確認（CSS変数による自動切替）
  - _Requirements: 4.1, 4.2, 4.3_

- [ ] 5. 統合テストと検証を実施する
- [ ] 5.1 リンク変換の動作を検証する
  - テスト用のMarkdownファイルで生URL（https://...）がカード変換されることを確認
  - 山括弧URL（<https://...>）がカード変換されることを確認
  - インライン形式リンク（[text](url)）が通常リンクのまま維持されることを確認
  - OG情報（タイトル、説明、画像）が正しく表示されることを確認
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [ ] 5.2 ビジュアル表示を検証する
  - ライトモードでカードが正しく表示されることを確認
  - ダークモードでカードが正しく表示されることを確認
  - テーマ切替時にスタイルが即座に反映されることを確認
  - モバイル幅でレスポンシブレイアウトが正しく動作することを確認
  - ホバー時にエフェクトが表示されることを確認
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 4.1, 4.2, 4.3_

## Requirements Coverage

| Requirement | Tasks |
|-------------|-------|
| 1.1 | 1.1, 1.2 |
| 1.2 | 1.4 |
| 1.3 | 1.2 |
| 1.4 | 1.2 |
| 2.1 | 5.1 |
| 2.2 | 5.1 |
| 2.3 | 5.1 |
| 2.4 | 5.1 |
| 3.1 | 2.1, 2.2, 5.2 |
| 3.2 | 2.1, 2.2, 2.3, 5.2 |
| 3.3 | 3.1, 5.2 |
| 3.4 | 3.2, 5.2 |
| 4.1 | 4.1, 5.2 |
| 4.2 | 4.1, 5.2 |
| 4.3 | 4.1, 5.2 |
| 5.1 | 1.4 |
| 5.2 | 1.3 |
| 5.3 | 1.4 |
