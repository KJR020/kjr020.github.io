# Implementation Plan

## Tasks

- [x] 1. MobileMenuコンポーネントの作成
- [x] 1.1 ハンバーガーボタンとメニュー開閉状態を実装する
  - ボタンクリックでisOpen状態をトグル
  - ハンバーガーアイコン（三本線）を表示
  - aria-label属性を設定（「メニューを開く」/「メニューを閉じる」）
  - aria-expanded属性をisOpen状態と同期
  - _Requirements: 1.2, 3.1, 3.2_

- [x] 1.2 ナビゲーションリンクのドロップダウン表示を実装する
  - navItems propsを受け取りリンク一覧を表示
  - メニュー展開時に縦方向にリンクを配置
  - 外部リンク（Scrapbox）には新しいタブで開くアイコンを表示
  - 開閉アニメーション（transform + opacity）を300ms以内で実装
  - _Requirements: 1.2, 4.1_

- [x] 1.3 メニュー自動閉じ機能を実装する
  - リンクをクリックしたらメニューを閉じる
  - document全体へのクリックイベントリスナーでメニュー外クリックを検出
  - Escapeキー押下でメニューを閉じる
  - コンポーネントアンマウント時にイベントリスナーをクリーンアップ
  - _Requirements: 1.3, 1.4, 3.3_

- [x] 2. Header.astroのレスポンシブ対応
- [x] 2.1 モバイル/デスクトップ表示の切り替えを実装する
  - デスクトップナビゲーションに`hidden md:flex`を適用
  - MobileMenuコンポーネントをインポートし`md:hidden`で表示制御
  - navItems配列をMobileMenuにpropsとして渡す
  - `client:load`ディレクティブでハイドレーション設定
  - _Requirements: 1.1, 2.1, 2.2_

- [x] 2.2 既存スタイルの維持とコンテナ幅制御を確認する
  - sticky、backdrop-blur、border-bottomスタイルが維持されていることを確認
  - 全ビューポート幅でヘッダーがコンテナ幅を超えないことを確認
  - ThemeToggleの配置が崩れていないことを確認
  - _Requirements: 1.5, 2.3_

- [x] 3. E2Eテストの作成
- [x] 3.1 (P) モバイルビューポートでのメニュー動作をテストする
  - 768px未満でハンバーガーメニューが表示されることを確認
  - メニュー開閉が正しく動作することを確認
  - リンククリック後にメニューが閉じることを確認
  - _Requirements: 1.1, 1.2, 1.3_

- [x] 3.2 (P) デスクトップビューポートでの表示をテストする
  - 768px以上で水平ナビゲーションが表示されることを確認
  - ハンバーガーメニューが非表示であることを確認
  - 既存のナビゲーション動作が正常であることを確認
  - _Requirements: 2.1, 2.2, 2.3_
