# Implementation Plan

## Tasks

- [x] 1. プラグインのセットアップと基本動作確認
- [x] 1.1 依存パッケージを追加してAstro設定にプラグインを登録する
  - pnpmで@r4ai/remark-calloutパッケージをインストール
  - astro.config.mjsのremarkPlugins配列にremarkCalloutを追加
  - 既存のremarkLinkCardプラグインとの共存を維持
  - ビルドが正常に完了することを確認
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 5.3_

- [x] 1.2 サンプル記事を作成してコールアウト変換を検証する
  - 4種類のコールアウト（note/tip/warning/danger）を含むテスト記事を作成
  - カスタムタイトルありとタイトルなしの両パターンを含める
  - 複数段落、リスト、コードブロック、インラインコードを含むコールアウトを作成
  - 開発サーバーで記事を表示し、HTMLがdata属性付きで出力されることを確認
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 2.1, 2.2, 2.3, 2.4_

- [x] 2. コールアウトスタイルの実装
- [x] 2.1 (P) CSS変数を定義してライトモード用カラーを設定する
  - globals.cssの:rootセクションにコールアウト用CSS変数を追加
  - note（青系）、tip（緑系）、warning（黄/オレンジ系）、danger（赤系）の配色を定義
  - 背景色、ボーダー色、タイトル色の3種類を各タイプで設定
  - _Requirements: 3.2_

- [x] 2.2 (P) ダークモード用CSS変数を定義する
  - globals.cssの.darkセクションにダークモード用カラーを追加
  - ライトモードと視覚的に一貫した配色を維持しつつ暗い背景に適合させる
  - コントラスト比がWCAG AA基準を満たすことを確認
  - _Requirements: 3.4, 3.5, 4.2_

- [x] 2.3 コールアウト要素のベーススタイルを実装する
  - data-callout属性を持つ要素に余白、パディング、左ボーダー、角丸を適用
  - data-callout-title要素にフォントウェイトとマージンを設定
  - data-callout-body内の最後の子要素の下マージンを調整
  - 既存のremark-link-cardスタイルセクションの後に追加
  - _Requirements: 3.1, 3.3, 4.3_

- [x] 2.4 タイプ別スタイルを実装する
  - note/tip/warning/danger各タイプの背景色とボーダー色を適用
  - 各タイプのタイトル色を設定
  - data-callout-type属性セレクタを使用してスタイルを分岐
  - _Requirements: 3.2, 4.1_

- [x] 3. 統合テストと既存コンテンツ互換性の確認
- [x] 3.1 ライトモードとダークモードでの表示を確認する
  - 開発サーバーでサンプル記事を表示
  - 4種類のコールアウトが視覚的に区別できることを確認
  - ダークモードに切り替えて配色が適切に変化することを確認
  - タイトル行と本文が視覚的に区別されていることを確認
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [x] 3.2 既存記事への影響がないことを確認する
  - コールアウト記法を含まない既存記事をビルドして表示
  - 通常のblockquote（`>`のみ）が従来通りレンダリングされることを確認
  - 既存記事のレイアウトやスタイルに変化がないことを確認
  - _Requirements: 5.1, 5.2_

- [x] 4. ドキュメントの更新
- [x] 4.1 (P) README.mdにコールアウト記法の使用方法を追記する
  - 基本的な記法例（note/tip/warning/danger）を記載
  - カスタムタイトルの指定方法を記載
  - 複数段落、リスト、コードブロックを含む例を記載
  - _Requirements: 6.1, 6.2, 6.3_

- [x] 5. 最終ビルドと検証
- [x] 5.1 本番ビルドを実行して成功を確認する
  - pnpm buildを実行してエラーがないことを確認
  - 生成されたHTMLにコールアウト要素が含まれることを確認
  - lint、typecheck、testが全て通ることを確認
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 5.1, 5.2, 5.3_
